"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const webpack = require("webpack");
const ui_1 = require("@vuesion/utils/dist/ui");
const build = () => {
    const configPath = process.argv[2];
    const mode = process.argv[3];
    const debug = process.argv[4] === 'true';
    const config = require(configPath).default;
    config.mode = mode;
    webpack(config).run((error, stats) => {
        if (error) {
            ui_1.logError(error);
            return 1;
        }
        const jsonStats = stats.toJson();
        if (jsonStats.hasErrors) {
            jsonStats.errors.forEach((err) => ui_1.logError(err));
            return 1;
        }
        if (jsonStats.hasWarnings) {
            jsonStats.warnings.forEach((warning) => ui_1.logWarning(warning));
        }
        if (debug) {
            ui_1.log(stats.toString());
        }
    });
};
build();
